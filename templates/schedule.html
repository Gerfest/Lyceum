{% extends "base.html" %}
{% load static %}

{% block title %}Розклад{% endblock %}

{% block css %}
    <link rel="stylesheet" href="{% static 'css/schedule.css' %}">
{% endblock %}

{% block content %}
    <h1>Розклад {{ class }}</h1>
    {% if "staff" in user_type %}
        <p style="text-align: center">Переглядів за день: {{ last_day_views }},
            за весь час: {{ all_views }}</p>
    {% endif %}
    <div class="week_selection">
        <a href="?class={{ class }}&date={{ last_week_day }}"
           class="btn btn-outline-secondary change-week_button">
            <
        </a>
        <span>{{ date }}</span>
        <a
                href="?class={{ class }}&date={{ next_week_day }}"
                class="btn btn-outline-secondary change-week_button">
            >
        </a>
    </div>
    <section class="main-sec">
        <table class="table table-bordered table-primary">
            <thead>
            <tr>
                {% for day in week_days %}
                    <th class="{{ day.active }}" scope="col">
                        <span class="day_text">{{ day }}</span>
                        <br/>
                        <span class="day_num">{{ day.date }}</span>
                    </th>
                {% endfor %}
            </tr>
            </thead>
            <tbody>
            <tr>
                {% for day in table %}
                    <td class="{{ day.active }}">
                        <div class="cell-wrap">
                            {% for lesson in day.lessons %}
                                <a target="_blank"
                                        {% if lesson.link and not lesson.hide_link %}
                                   href="//{{ lesson.link }}"
                                        {% endif %}
                                   class="task_card {{ lesson.type }}_card">
                                    <h5>{{ lesson.subject }}</h5>
                                    <span>{{ lesson.description }}</span>
                                    {% if lesson.hide_link %}
                                        <span>Посилання приховане до початку
                                            {% if lesson.type == "lesson" %}
                                                уроку
                                            {% elif lesson.type == "test" %}
                                                тесту
                                            {% else %}
                                                {{ lesson.type }}
                                            {% endif %}
                                        </span>
                                    {% endif %}
                                    <span class="info">
                                        {% if lesson.type == "lesson" %}
                                            Урок
                                        {% elif lesson.type == "test" %}
                                            Тест
                                        {% else %}
                                            {{ lesson.type }}
                                        {% endif %}
                                    </span>
                                    <span class="info">{{ lesson.teacher.user.last_name }} {{ lesson.teacher.user.first_name }}</span>
                                    <span class="info">{{ lesson.time_start }}-{{ lesson.time_end }}</span>
                                </a>
                            {% endfor %}
                        </div>
                    </td>
                {% endfor %}
            </tr>
            </tbody>
        </table>
    </section>
{% endblock %}

{% block js %}
{% endblock %}